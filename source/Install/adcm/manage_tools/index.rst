Инструменты управления
======================

В **ADS** предусмотрено 2 вида операций:

* Операции на уровне кластера. Предполагают выполнение операций последовательно над всеми сервисами;

* Операции на уровне сервиса. Предполагают выполнение операций над отдельным сервисом.
 
Операции на уровне кластера
---------------------------

Запуск и остановка ADS
^^^^^^^^^^^^^^^^^^^^^^^^

Существует возможность последовательного  запуска и остановки всех сервисов кластера *ads* через **ADCM**:

1. Открыть в ADCM кластер *ads* и нажать на соответствующую кнопку *Start*, *Stop*, *Restart* для работы с кластером (:numref:`Рис.%s <img_43>`).

.. _img_43:

.. figure:: ../../imgs/adcm.*
   :align: center

   Запуск и остановка кластера


В результате того или иного действия кластер меняет свое состояние на соответствующее состояние *running* или *stopped*, в том случае если кластер уже был проинсталирован и не находится в состоянии *created*.

Операции на уровне сервисов
---------------------------

Проверка состояния сервисов
---------------------------

Для каждого из сервисов доступна возможность проверки его работоспособности.

Проверка состояния сервиса Zookeeper
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Проверка работоспособности сервиса *Zookeeper* представляет собой подключение к кворуму *Zookeeper*, создание в нем тестовой *znode*  и проверку доступности созданной *znode* каждому из хостов кворума.

Для проверки результатов действий над сервисом *Zookeeper* необходимо:

1. Перейти в кластер *ads* в ADCM, на вкладке "Services" для сервиса *Zookeeper* в поле "Actions" нажать на пиктограмму и выбрать действие "Check" (:numref:`Рис.%s <img_39>`).

.. _img_39:

.. figure:: ../../imgs/adcm.*
   :align: center

   Запуск проверки состояния сервиса *Zookeeper*


2. Открыть вкладку "JOBS" (:numref:`Рис.%s <img_41>`).

.. _img_41:

.. figure:: ../../imgs/adcm.*
   :align: center

   Вкладка "JOBS"


3. Выбрать последнее действие над кластером *ads* и в открывшемся окне проверить результаты (:numref:`Рис.%s <img_42>`).

.. _img_42:

.. figure:: ../../imgs/adcm.*
   :align: center

   Проверка состояния сервиса *Zookeeper*


Проверка состояния сервиса Kafka
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Проверка работоспособности сервиса *Kafka* представляет собой создание тестовых топиков на каждом из хостов *BROKER* и проверку доступности созданных топиков.

Для проверки результатов действий над сервисом *Kafka* необходимо:

1. Перейти в кластер *ads* в ADCM, на вкладке "Services" для сервиса *Kafka* в поле "Actions" нажать на пиктограмму и выбрать действие "Check" (:numref:`Рис.%s <img_39>`).

.. _img_39:

.. figure:: ../../imgs/adcm.*
   :align: center

   Запуск проверки состояния сервиса *Kafka*


2. Открыть вкладку "JOBS" (:numref:`Рис.%s <img_41>`).

.. _img_41:

.. figure:: ../../imgs/adcm.*
   :align: center
s
   Вкладка "JOBS"


3. Выбрать последнее действие над кластером *ads* и в открывшемся окне проверить результаты (:numref:`Рис.%s <img_42>`).

.. _img_42:

.. figure:: ../../imgs/adcm.*
   :align: center

   Проверка состояния сервиса *Kafka*


Запуск и остановка сервисов
---------------------------

Для каждого из сервисов есть возможность управления им независимо от остальных, выполнять такие операции как *Stop*, *Start*, *Restart*.

Например, для того чтобы перезапустить все компоненты сервиса *Kafka* необходимо:

1. Перейти в кластер *ads* в ADCM, на вкладке "Services" для сервиса *Kafka* в поле "Actions" нажать на пиктограмму и выбрать действие "Restart" (:numref:`Рис.%s <img_43>`).

.. _img_43:

.. figure:: ../../imgs/adcm.*
   :align: center

   Допустимые операции над сервисом *Kafka*


В результате того или иного действия статус сервиса меняется на  *running* или *stopped*, в том случае если сервис уже был проинсталирован и не находится в состоянии *created*.
