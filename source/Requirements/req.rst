Необходимая информация для установки кластера
---------------------------------------------

Для установки кластера ADS необходима следующая информация:

* IP-адреса всех серверов в кластере;

* Доступ к пользователю root/любому пользователю с правами SUDO на серверах кластера;

.. important:: В случае инсталляции без доступа в Интернет (offline)
    * Доступ к развернутому на выделенном сервере `Arenadata Enterprise Tools <https://docs.arenadata.io/etools/ru/index.html>`_

.. important:: В случае инсталляции с доступом в Интернет
    * Доступ к развернутому на выделенном сервере `Arenadata Cluster Manager <https://docs.arenadata.io/adcm/user/requisites.html>`_


Минимальные аппаратные требования
---------------------------------

Сеть
^^^^

Минимальные аппаратные требования к сети следующие:

* Наличие одной или нескольких выделенных и обособленных одноранговых Interconnect-сетей под цели внутренней коммуникации кластера;

* К Interconnect-сетям должны быть подключены все сервера кластера, серверам должны быть розданы адреса, и сервера должны «видеть» друг друга;

* Скорость Ethernet от 1 Гб/с (стандартом является 10 Гб/с);

* Отсутствие firewalls и другого ПО, блокирующего или замедляющего траффик;

* Внутри кластера должна быть открыта коммуникация по всем портам;

* Снаружи кластер должен быть доступен по следующим портам:
Здесь надо нарисовать таблицу с портами

.. csv-table:: Карта портов
   :header: "№ пп.", "Порт", "Описание"
   :widths: 10, 45, 45

   "1", "22", "ssh"
   "2", "81", "tcp порт Arenadata Enterprise Tools  "
   "1", "22", "ssh"
   "1", "22", "ssh"
   "1", "22", "ssh"
   "1", "22", "ssh"
   "1", "22", "ssh"
 
* Доступ к репозиториям, предварительно развернутым в сети организации на сервере Arenadata Enterprise Tools (по умолчанию порт 81/tcp).

* Для отправки метрик на сервер мониторинга к нему должно быть разрешено подключение серверов кластера (по умолчанию 2015/tcp, 2016/udp);

* Для отправки статусов компонентов кластера в ADCM к нему должно быть разрешено подключение серверов кластера (по умолчанию порт 8000/tcp);

* Доступность Ping любого из серверов (ICMP)

Zookeeper Server
^^^^^^^^^^^^^^^^^

Минимальные аппаратные требования к серверу *Zookeeper*:

* Физический сервер;
* RAM: от 16 Гб;
* ROM: отдельный физический RAID10-массив, неформатированный, от 5 Гб и больше;
* CPU: от 8 ядер.

Kafka Broker
^^^^^^^^^^^^^

Минимальные аппаратные требования к отдельному брокеру *Kafka* для установки кластера ADS следующие:

* Физический сервер;
* RAM: от 16 Гб;
* ROM: отдельный физический RAID10-массив, неформатированный, от 5 Гб и больше;
* CPU: от 8 ядер.

Nifi Server
^^^^^^^^^^^^

Минимальные аппаратные требования к серверу *Nifi*:

* Физический сервер;

* RAM: от 32 Гб;

* ROM: один или несколько физических RAID10-массивов,  от 10 Гб каждый;

* CPU: от 16 ядер.


Программные требования
-----------------------

Минимальные программные требования для установки кластера ADS следующие:

* ОС – RHEL/CentOS 7.6.1810;

* На серверах настроен NTP;

* Процесс установки модифицирует следующие системные файлы:

    * /etc/hosts

    * /etc/ssh/sshd_config

    * /etc/selinux/config

    * /etc/security/limits.conf

    * /etc/sysctl.conf

    * Создаёт новые файлы в /usr/lib/systemd/system/

Перечисленные файлы не должны контролироваться системой управления конфигурации (при ее наличии);

* Процесс установки останавливает и выключает сервисы firewalld и SELinux, данные сервисы не должны контролироваться системой управления конфигурации (при ее наличии);

* Процесс установки создаёт новые сервисы, данные сервисы не должны контролироваться системой управления конфигурации (при ее наличии);

* Со всех машин в кластере должен быть доступ к официальному репозиторию CentOS Extras (например, РБК http://centos-mirror.rbc.ru/pub/centos/7/extras/x86_64/ или создано локальное зеркало);

* Со всех машин в кластере должен быть доступ к официальному репозиторию CentOS Updates (например, РБК http://centos-mirror.rbc.ru/pub/centos/7/updates/x86_64/ или создано локальное зеркало);

* Со всех машин в кластере должен быть доступ к официальному репозиторию CentOS Base (например, РБК http://centos-mirror.rbc.ru/pub/centos/7/os/x86_64/ или создано локальное зеркало).

.. important:: В случае инсталляции без доступа в Интернет (offline) нижеприведенные требования не должны выполняться.
    * Со всех машин в кластере должен быть доступ к официальному репозиторию ADS: https://storage.googleapis.com/arenadata-repo/ADS/1.4.0/centos7/

    * Со всех машин в кластере должен быть доступ к официальному репозиторию Arenadata Monitoring: https://storage.googleapis.com/arenadata-repo/ADM/2.1/x64/
