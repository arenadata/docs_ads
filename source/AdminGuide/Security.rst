Безопасность в кластере ADS
=================================

Enterprise версия бандла **ADS** предоставляет поддержку SASL/PLAIN аутентификации для сервисов *Kafka*, *KSQL*, *Kafka-Rest*, *Schema-Registry*, *Kafka-Manager*.
Данный функционал обеспечивает безопасность кластера Kafka.
В данном разделе приведены основные шаги для включения аутентификации SASL/PLAIN:

+ `Включение SASL/PLAIN`_;
+ `Добавление/Обновление пользователя`_.


Включение SASL/PLAIN
------------------

После установки *Kafka* и зависимых сервисов с помощью **ADCM**, в кластере появляется возможность включить аутентификацию SASL/PLAIN с помощью кластерной кнопки *Enable PLAIN* (:numref:`Рис.%s. <enable_plain>`).

.. _enable_plain:

.. figure:: ../imgs/enable_plain.png
   :align: center

   Вызов включения SASL/PLAIN

В всплывающем окне необходимо установить пароль для пользователя *kafka* (:numref:`Рис.%s. <enable_plain_popup>`).


.. _enable_plain_popup:

.. figure:: ../imgs/enable_plain_popup.png
   :align: center

   Всплывающее окно при включение SASL/PLAIN

После чего произойдет конфигурация сервисов для SASL/PLAIN. *Enable PLAIN* включает в себя конфигурирование сервисов *Kafka*, *KSQL*, *Kafka-Rest*, *Schema-Registry*, *Kafka-Manager*.
Данные сервисы имеют специальных пользователей, с помощью которых происходит соединение с Kafka кластером.

.. warning:: При выполнении произойдет перезапуск сервисов, поэтому существующие соединения будут разорваны!

Список создаваемых пользователей:

+ kafka

+ ksql-server

+ rest-server

+ schema-registry-server

+ kafka-manager-server


Добавление/Обновление пользователя
-----------------------

Добавление/Обновление пользователя происходит с помощью вызова *Create/Update user* (:numref:`Рис.%s. <create_update_user>`).

.. _create_update_user:

.. figure:: ../imgs/create_update_user.png
   :align: center

   Вызов добавления/обновления пользователя

В всплывающем окне необходимо ввести данные пользователя, а именно username и password (:numref:`Рис.%s. <create_update_user_popup>`).
Для обновления данных пользователя необходимо установить флаг *Update*.

.. _create_update_user_popup:

.. figure:: ../imgs/create_update_user_popup.png
   :align: center

   Вызов добавления/обновления пользователя

.. warning:: При выполнении произойдет перезапуск сервисов, поэтому существующие соединения будут разорваны!

.. note:: За раз можно создать/обновить только одного пользователя. Создание пользователя происходит только в конфигурации *Kafka*. Для других сервисов необходимо использовать собственные jaas файлы.
